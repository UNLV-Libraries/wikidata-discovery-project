{% extends 'discover/base.html' %}

{% block header2 %}Information about People Named in Special Collections and Archives - Search Results{% endblock %}

{% block main-content %}
    <form action="/discover/people_filtered/" method="post">
    {% csrf_token %}
        {{ search }}
    <input type="submit" value="SEARCH">
    </form><br>

    {% if filtered_people %}
          <table>
              <tr>
                  <td>DETAILS</td>
                  <td><strong>PERSON</strong></td>
                  <td><strong>ABOUT</strong></td>
            </tr>
            {% for p in filtered_people %}
                <tr>
                    <td><a href="/discover/item/{{ p.item_id }}">details</a></td>
                    <td>{{ p.itemlabel }}</td>
                    <td>{{ p.itemdesc }}</td>
                </tr>
            {% endfor %}
        </table>
    {% else %}
        <p>No people returned from your search.</p>
    {% endif %}
{% endblock %}

{% block main-graph %}
    <script type="text/javascript">
        // initialize global variables.
        var inbound_nodes = {{ nodes }};
        var inbound_edges = {{ edges }};
        var edges;
        var nodes;
        var network;
        var container;
        var options, the_data;

        // This method is responsible for drawing the graph, returns the drawn network
        function drawGraph() {
          var container = document.getElementById('vis-container');

          // create objects for network
          nodes = new vis.DataSet(inbound_nodes);
          edges = new vis.DataSet(inbound_edges);

          // adding nodes and edges to the graph
          the_data = {nodes: nodes, edges: edges};
          var options = {};

          network = new vis.Network(container, the_data, options);
          return network;
        }
        //drawGraph();
        //window.onload = (event) => {
        //  drawGraph();
        //};
    </script>
{% endblock %}